# üê≥ VoiceMood Docker Setup

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î, —è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ VoiceMood —Å–∏—Å—Ç–µ–º—É –ø–æ–∫—É–ø–æ–∫ —É Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ.

## üìã –í–∏–º–æ–≥–∏

- Docker 20.10+
- Docker Compose 1.29+

## üöÄ –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# –ó–±—É–¥—É–≤–∞—Ç–∏ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up --build

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ
docker-compose up --build -d

# –ó—É–ø–∏–Ω–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker –Ω–∞–ø—Ä—è–º—É

```bash
# –ó–±—É–¥—É–≤–∞—Ç–∏ –æ–±—Ä–∞–∑
docker build -t voicemood-app .

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -p 8080:8080 --name voicemood-container voicemood-app

# –ó—É–ø–∏–Ω–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stop voicemood-container

# –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker rm voicemood-container
```

## üåê –î–æ—Å—Ç—É–ø –¥–æ –¥–æ–¥–∞—Ç–∫—É

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –¥–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
- **–û—Å–Ω–æ–≤–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫**: http://localhost:8080
- **H2 –∫–æ–Ω—Å–æ–ª—å** (–¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è): http://localhost:8080/h2-console

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è H2 –∫–æ–Ω—Å–æ–ª—ñ:
- **JDBC URL**: `jdbc:h2:mem:voicemood`
- **User Name**: `sa`
- **Password**: (–∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º)

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ü—Ä–æ—Ñ—ñ–ª—ñ Spring Boot

–î–æ–¥–∞—Ç–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä—ñ–∑–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ:
- **default**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î MySQL (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)
- **docker**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î H2 in-memory –±–∞–∑—É –¥–∞–Ω–∏—Ö (–¥–ª—è Docker)

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–£ `docker-compose.yml` –º–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏:

```yaml
environment:
  - SPRING_PROFILES_ACTIVE=docker
  - SERVER_PORT=8080
  - LOGGING_LEVEL_ROOT=INFO
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ Dockerfile              # –û—Å–Ω–æ–≤–Ω–∏–π Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ .dockerignore           # –§–∞–π–ª–∏, —â–æ –≤–∏–∫–ª—é—á–∞—é—Ç—å—Å—è –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–±—ñ—Ä–∫–∏
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main/
‚îÇ       ‚îî‚îÄ‚îÄ resources/
‚îÇ           ‚îú‚îÄ‚îÄ application.properties         # –û—Å–Ω–æ–≤–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ           ‚îî‚îÄ‚îÄ application-docker.properties  # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è Docker
‚îî‚îÄ‚îÄ target/                 # –ó–±—É–¥–æ–≤–∞–Ω–∏–π JAR —Ñ–∞–π–ª
```

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ –æ–±—Ä–∞–∑—É

```bash
# –ü—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–¥—É
docker-compose up --build

# –ü—Ä–∏–º—É—Å–æ–≤–∞ –ø–µ—Ä–µ–±—É–¥–æ–≤–∞ –±–µ–∑ –∫–µ—à—É
docker-compose build --no-cache
docker-compose up
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤

```bash
# –í—Å—ñ –ª–æ–≥–∏
docker-compose logs

# –õ–æ–≥–∏ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
docker-compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É
docker-compose logs voicemood-app
```

### –í–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥ —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ

```bash
# –í—Ö—ñ–¥ —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec voicemood-app bash

# –ê–±–æ —è–∫—â–æ bash –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
docker-compose exec voicemood-app sh
```

## üîç –í—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –°–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker ps

# –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
docker-compose ps
```

### –û—á–∏—Å—Ç–∫–∞

```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ —Ç–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker-compose down

# –í–∏–¥–∞–ª–∏—Ç–∏ –æ–±—Ä–∞–∑–∏
docker rmi voicemood-app

# –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å–µ (–æ–±–µ—Ä–µ–∂–Ω–æ!)
docker system prune -f
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stats voicemood-container

# –ê–±–æ —á–µ—Ä–µ–∑ compose
docker-compose top
```

## üîê –ë–µ–∑–ø–µ–∫–∞

–£ production —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è:

1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ multi-stage Dockerfile
2. –ù–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ø–∞—Ä–æ–ª—ñ —É –∫–æ–¥—ñ
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Docker secrets
4. –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –±–∞–∑–æ–≤—ñ –æ–±—Ä–∞–∑–∏

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- H2 –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø—Ä–∞—Ü—é—î —É —Ä–µ–∂–∏–º—ñ in-memory, —Ç–æ–º—É –¥–∞–Ω—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
- –î–ª—è production –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—é –±–∞–∑—É –¥–∞–Ω–∏—Ö (PostgreSQL, MySQL)
- –õ–æ–≥–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–≤–æ–¥—è—Ç—å—Å—è —É stdout –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ 